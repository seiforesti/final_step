%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#0066cc',
    'primaryTextColor': '#ffffff',
    'primaryBorderColor': '#004499',
    'lineColor': '#0066cc',
    'secondaryColor': '#3399ff',
    'tertiaryColor': '#009966',
    'background': '#f8f9fa',
    'mainBkg': '#ffffff',
    'secondBkg': '#f0f8ff',
    'tertiaryBkg': '#e6f7ff'
  }
}}%%

graph TB
    subgraph "ğŸ“Š Data Sources"
        MYSQL[(ğŸ¬ MySQL<br/>Transactional Data<br/>ACID Compliance)]:::mysql
        POSTGRES[(ğŸ˜ PostgreSQL<br/>Analytical Data<br/>JSON Support)]:::postgres
        MONGODB[(ğŸƒ MongoDB<br/>Document Data<br/>Flexible Schema)]:::mongodb
        SNOWFLAKE[(â„ï¸ Snowflake<br/>Cloud Data<br/>Data Warehouse)]:::snowflake
        S3[(ğŸª£ S3 Storage<br/>Object Data<br/>File Storage)]:::s3
        REDIS[(ğŸ”´ Redis<br/>Cache Data<br/>In-Memory Store)]:::redis
    end
    
    subgraph "ğŸŒ Edge Processing Layer"
        EDGE_CONN[ğŸ”Œ Edge Connectors<br/>Universal Drivers<br/>Connection Pooling]:::edge
        EDGE_FILTER[ğŸ” Edge Filters<br/>Data Validation<br/>Schema Validation]:::edge
        EDGE_TRANSFORM[ğŸ”„ Edge Transform<br/>Data Processing<br/>Format Conversion]:::edge
        EDGE_CLASSIFY[ğŸ·ï¸ Edge Classify<br/>Local Classification<br/>ML Models]:::edge
        EDGE_CACHE[âš¡ Edge Cache<br/>Local Storage<br/>Metadata Cache]:::edge
    end
    
    subgraph "â˜ï¸ Cloud Processing Layer"
        STREAM_PROC[ğŸŒŠ Stream Processing<br/>Kafka Streams<br/>Real-time Processing]:::stream
        BATCH_PROC[ğŸ“¦ Batch Processing<br/>Apache Spark<br/>Batch Analytics]:::batch
        ML_PROC[ğŸ¤– ML Processing<br/>PyTorch + Scikit<br/>Model Inference]:::ml
        RULE_ENGINE[ğŸ“‹ Rule Engine<br/>Policy Evaluation<br/>Compliance Rules]:::rules
    end
    
    subgraph "ğŸ—ï¸ Core Services Layer"
        DS_SVC[ğŸ—„ï¸ Data Source Service<br/>Connection Management<br/>Health Monitoring]:::datasource
        CAT_SVC[ğŸ“š Catalog Service<br/>Asset Management<br/>Lineage Tracking]:::catalog
        CLASS_SVC[ğŸ·ï¸ Classification Service<br/>Data Classification<br/>Pattern Recognition]:::classification
        SCAN_SVC[ğŸ” Scan Logic Service<br/>Workflow Orchestration<br/>Resource Management]:::scan
        COMP_SVC[âš–ï¸ Compliance Service<br/>Policy Enforcement<br/>Risk Assessment]:::compliance
        RBAC_SVC[ğŸ‘¥ RBAC Service<br/>Access Control<br/>Permission Management]:::rbac
    end
    
    subgraph "ğŸ’¾ Storage Layer"
        HOT_STORAGE[ğŸ”¥ Hot Storage<br/>PostgreSQL + Redis<br/>Transactional Data]:::hot
        WARM_STORAGE[ğŸŒ¡ï¸ Warm Storage<br/>Elasticsearch<br/>Search Index]:::warm
        COLD_STORAGE[â„ï¸ Cold Storage<br/>S3 + Data Lake<br/>Archive Data]:::cold
    end
    
    subgraph "ğŸ“Š Analytics Layer"
        REAL_TIME[âš¡ Real-time Analytics<br/>Streaming Queries<br/>Live Dashboards]:::realtime
        BATCH_ANALYTICS[ğŸ“Š Batch Analytics<br/>Scheduled Reports<br/>Historical Analysis]:::batchanalytics
        ML_ANALYTICS[ğŸ¤– ML Analytics<br/>Predictive Models<br/>AI Insights]:::mlanalytics
        DASHBOARD[ğŸ“ˆ Dashboard<br/>Grafana + Custom<br/>Data Visualization]:::dashboard
    end
    
    subgraph "ğŸ‘¤ User Interface"
        WEB_UI[ğŸ–¥ï¸ Web Interface<br/>React Frontend<br/>Interactive UI]:::web
        MOBILE_UI[ğŸ“± Mobile App<br/>React Native<br/>Mobile Access]:::mobile
        API_CLIENT[ğŸ“¡ API Client<br/>REST + GraphQL<br/>External Integration]:::api
    end
    
    %% Data Source to Edge Processing
    MYSQL -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    POSTGRES -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    MONGODB -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    SNOWFLAKE -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    S3 -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    REDIS -.->|"ğŸ“Š Stream Data"| EDGE_CONN
    
    %% Edge Processing Flow
    EDGE_CONN -.->|"ğŸ”Œ Connect"| EDGE_FILTER
    EDGE_FILTER -.->|"ğŸ” Filter"| EDGE_TRANSFORM
    EDGE_TRANSFORM -.->|"ğŸ”„ Transform"| EDGE_CLASSIFY
    EDGE_CLASSIFY -.->|"ğŸ·ï¸ Classify"| EDGE_CACHE
    
    %% Edge to Cloud Processing
    EDGE_CACHE -.->|"ğŸ“¨ Stream Events"| STREAM_PROC
    STREAM_PROC -.->|"ğŸŒŠ Process"| BATCH_PROC
    BATCH_PROC -.->|"ğŸ“¦ Process"| ML_PROC
    ML_PROC -.->|"ğŸ¤– Process"| RULE_ENGINE
    
    %% Cloud Processing to Core Services
    RULE_ENGINE -.->|"ğŸ“‹ Evaluate"| DS_SVC
    DS_SVC -.->|"ğŸ—„ï¸ Manage"| CAT_SVC
    CAT_SVC -.->|"ğŸ“š Catalog"| CLASS_SVC
    CLASS_SVC -.->|"ğŸ·ï¸ Classify"| SCAN_SVC
    SCAN_SVC -.->|"ğŸ” Scan"| COMP_SVC
    COMP_SVC -.->|"âš–ï¸ Enforce"| RBAC_SVC
    
    %% Core Services to Storage
    DS_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    CAT_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    CLASS_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    SCAN_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    COMP_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    RBAC_SVC -.->|"ğŸ’¾ Store"| HOT_STORAGE
    
    %% Storage Tiering
    HOT_STORAGE -.->|"ğŸŒ¡ï¸ Archive"| WARM_STORAGE
    WARM_STORAGE -.->|"â„ï¸ Archive"| COLD_STORAGE
    
    %% Storage to Analytics
    HOT_STORAGE -.->|"âš¡ Query"| REAL_TIME
    WARM_STORAGE -.->|"ğŸ“Š Query"| BATCH_ANALYTICS
    COLD_STORAGE -.->|"ğŸ¤– Query"| ML_ANALYTICS
    
    %% Analytics to Visualization
    REAL_TIME -.->|"ğŸ“ˆ Visualize"| DASHBOARD
    BATCH_ANALYTICS -.->|"ğŸ“Š Visualize"| DASHBOARD
    ML_ANALYTICS -.->|"ğŸ¤– Visualize"| DASHBOARD
    
    %% User Interface Access
    DASHBOARD -.->|"ğŸ–¥ï¸ Display"| WEB_UI
    DASHBOARD -.->|"ğŸ“± Display"| MOBILE_UI
    DASHBOARD -.->|"ğŸ“¡ API"| API_CLIENT
    
    %% Feedback Loops
    WEB_UI -.->|"ğŸ”„ Feedback"| EDGE_CONN
    MOBILE_UI -.->|"ğŸ”„ Feedback"| EDGE_CONN
    API_CLIENT -.->|"ğŸ”„ Feedback"| EDGE_CONN
    
    %% Styling
    classDef mysql fill:#4479a1,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef postgres fill:#336791,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef mongodb fill:#4db33d,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef snowflake fill:#29b5e8,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef s3 fill:#ff9900,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef redis fill:#dc382d,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef edge fill:#e0f2f1,stroke:#004d40,stroke-width:2px,color:#000
    classDef stream fill:#e3f2fd,stroke:#1565c0,stroke-width:2px,color:#000
    classDef batch fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef ml fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef rules fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    classDef datasource fill:#e0f2f1,stroke:#004d40,stroke-width:2px,color:#000
    classDef catalog fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef classification fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    classDef scan fill:#f9fbe7,stroke:#827717,stroke-width:2px,color:#000
    classDef compliance fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef rbac fill:#e8eaf6,stroke:#283593,stroke-width:2px,color:#000
    classDef hot fill:#ff5722,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef warm fill:#ff9800,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef cold fill:#2196f3,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef realtime fill:#4caf50,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef batchanalytics fill:#8bc34a,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef mlanalytics fill:#9c27b0,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef dashboard fill:#607d8b,stroke:#ffffff,stroke-width:2px,color:#ffffff
    classDef web fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef mobile fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef api fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px,color:#000
